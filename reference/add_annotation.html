<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add annotations to a visR object — add_annotation • visR</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Add annotations to a visR object — add_annotation" />
<meta property="og:description" content="Wrapper around ggplot2::annotation_custom for simplified annotation to ggplot2 plots.
This function accepts a string, dataframe, data.table, tibble or customized
objects of class gtable and places them on the specified location on
the ggplot. The layout is fixed: bold columnheaders and plain body.
Only the font size and type can be chosen.
Both the initial plot as the individual annotation are stored as attribute component
in the final object." />
<meta property="og:image" content="https://openpharma.github.io/visR/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">visR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/CDISC_ADaM.html">Survival Analysis with visR using CDISC ADaM standard</a>
    </li>
    <li>
      <a href="../articles/Consort_flow_diagram.html">Creating consort flow diagram with visR</a>
    </li>
    <li>
      <a href="../articles/Styling_KM_plots.html">Styling survival plots</a>
    </li>
    <li>
      <a href="../articles/Time_to_event_analysis.html">Survival Analysis with visR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/openpharma/visR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add annotations to a visR object</h1>
    <small class="dont-index">Source: <a href='https://github.com/openpharma/visR/blob/master/R/add_annotation.R'><code>R/add_annotation.R</code></a></small>
    <div class="hidden name"><code>add_annotation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Wrapper around ggplot2::annotation_custom for simplified annotation to ggplot2 plots.
This function accepts a string, dataframe, data.table, tibble or customized
objects of class <code>gtable</code> and places them on the specified location on
the <code>ggplot</code>. The layout is fixed: bold columnheaders and plain body.
Only the font size and type can be chosen.
Both the initial plot as the individual annotation are stored as attribute <code>component</code>
in the final object.</p>
    </div>

    <pre class="usage"><span class='fu'>add_annotation</span><span class='op'>(</span>
  gg <span class='op'>=</span> <span class='cn'>NULL</span>,
  label <span class='op'>=</span> <span class='cn'>NULL</span>,
  base_family <span class='op'>=</span> <span class='st'>"sans"</span>,
  base_size <span class='op'>=</span> <span class='fl'>11</span>,
  xmin <span class='op'>=</span> <span class='op'>-</span><span class='cn'>Inf</span>,
  xmax <span class='op'>=</span> <span class='cn'>Inf</span>,
  ymin <span class='op'>=</span> <span class='op'>-</span><span class='cn'>Inf</span>,
  ymax <span class='op'>=</span> <span class='cn'>Inf</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>gg</th>
      <td><p>Object of class <code>ggplot</code>.</p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p><code>String, dataframe, data.table, tibble</code> used to annotate the <code>ggplot</code>.</p></td>
    </tr>
    <tr>
      <th>base_family</th>
      <td><p><code>character</code>. Base font family</p></td>
    </tr>
    <tr>
      <th>base_size</th>
      <td><p><code>numeric</code>. Base font size in pt</p></td>
    </tr>
    <tr>
      <th>xmin</th>
      <td><p>x coordinates giving horizontal location of raster in which to fit annotation.</p></td>
    </tr>
    <tr>
      <th>xmax</th>
      <td><p>x coordinates giving horizontal location of raster in which to fit annotation.</p></td>
    </tr>
    <tr>
      <th>ymin</th>
      <td><p>y coordinates giving vertical location of raster in which to fit annotation.</p></td>
    </tr>
    <tr>
      <th>ymax</th>
      <td><p>y coordinates giving vertical location of raster in which to fit annotation.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Object of class <code>ggplot</code> with added annotation with an object of class <code>gtable</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/gridExtra/man/tableGrob.html'>tableGrob</a></code> <code><a href='https://ggplot2.tidyverse.org/reference/annotation_custom.html'>annotation_custom</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Estimate survival</span>
<span class='va'>surv_object</span> <span class='op'>&lt;-</span> <span class='fu'>visR</span><span class='fu'>::</span><span class='fu'><a href='estimate_KM.html'>estimate_KM</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>adtte</span>, strata <span class='op'>=</span> <span class='st'>"TRTP"</span><span class='op'>)</span>

<span class='co'>## We want to annotate the survival KM plot with a simple string comment</span>
<span class='fu'>visR</span><span class='fu'>::</span><span class='fu'><a href='visr.html'>visr</a></span><span class='op'>(</span><span class='va'>surv_object</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>visR</span><span class='fu'>::</span><span class='fu'>add_annotation</span><span class='op'>(</span>
    label <span class='op'>=</span> <span class='st'>"My simple comment"</span>,
    base_family <span class='op'>=</span> <span class='st'>"sans"</span>,
    base_size <span class='op'>=</span> <span class='fl'>15</span>,
    xmin <span class='op'>=</span> <span class='fl'>110</span>,
    xmax <span class='op'>=</span> <span class='fl'>180</span>,
    ymin <span class='op'>=</span> <span class='fl'>0.80</span>
  <span class='op'>)</span>
</div><div class='img'><img src='add_annotation-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## Currently, care needs to be taken on the x-y values relative</span>
<span class='co'>## to the plot data area. Here we are plotting outside of the data area. </span>
<span class='fu'>visR</span><span class='fu'>::</span><span class='fu'><a href='visr.html'>visr</a></span><span class='op'>(</span><span class='va'>surv_object</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>visR</span><span class='fu'>::</span><span class='fu'>add_annotation</span><span class='op'>(</span>
  label <span class='op'>=</span> <span class='st'>"My simple comment"</span>,
  base_family <span class='op'>=</span> <span class='st'>"sans"</span>,
  base_size <span class='op'>=</span> <span class='fl'>15</span>,
  xmin <span class='op'>=</span> <span class='fl'>210</span>,
  xmax <span class='op'>=</span> <span class='fl'>380</span>,
  ymin <span class='op'>=</span> <span class='fl'>1.0</span>
  <span class='op'>)</span>
</div><div class='img'><img src='add_annotation-2.png' alt='' width='700' height='433' /></div><div class='input'>

<span class='co'>## We may also want to annotate a KM plot with information</span>
<span class='co'>## from additional tests or estimates. This example we annotate</span>
<span class='co'>## with p-values contained in a tibble </span>

<span class='co'>## we calculate p-values for "Equality across strata"</span>
<span class='va'>lbl</span> <span class='op'>&lt;-</span> <span class='fu'>visR</span><span class='fu'>::</span><span class='fu'><a href='get_pvalue.html'>get_pvalue</a></span><span class='op'>(</span><span class='va'>surv_object</span>,
             statlist <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"test"</span>, <span class='st'>"pvalue"</span><span class='op'>)</span>,
             type <span class='op'>=</span> <span class='st'>"All"</span><span class='op'>)</span>

<span class='co'>## display p-values</span>
<span class='va'>lbl</span>
</div><div class='output co'>#&gt;   Equality across strata p-value
#&gt; 1               Log-Rank  &lt;0.001
#&gt; 2               Wilcoxon  &lt;0.001
#&gt; 3            Tarone-Ware  &lt;0.001</div><div class='input'>
<span class='co'>## Now annotate survival KM plot with the p-values</span>
<span class='fu'>visR</span><span class='fu'>::</span><span class='fu'><a href='visr.html'>visr</a></span><span class='op'>(</span><span class='va'>surv_object</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>visR</span><span class='fu'>::</span><span class='fu'>add_annotation</span><span class='op'>(</span>
    label <span class='op'>=</span> <span class='va'>lbl</span>,
    base_family <span class='op'>=</span> <span class='st'>"sans"</span>,
    base_size <span class='op'>=</span> <span class='fl'>9</span>,
    xmin <span class='op'>=</span> <span class='fl'>100</span>,
    xmax <span class='op'>=</span> <span class='fl'>180</span>,
    ymin <span class='op'>=</span> <span class='fl'>0.80</span>
  <span class='op'>)</span>
</div><div class='img'><img src='add_annotation-3.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Diego Saldana, Charlotta Fruechtenicht, Mark Baillie, Marc Vandemeulebroecke, Thanos Siadimas, Pawel Kawski, Steven Haesendonckx, James Black, Pelagia Alexandra Papadopoulou, Tim Treis, Rebecca Albrecht.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


